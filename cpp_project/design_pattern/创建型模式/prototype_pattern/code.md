# åŸå‹æ¨¡å¼

---

## ä»€ä¹ˆæ˜¯åŸå‹æ¨¡å¼ï¼Ÿ

åŸå‹æ¨¡å¼ä¹Ÿæ˜¯ä¸€ç§`åˆ›å»ºå‹è®¾è®¡æ¨¡å¼`,è¯¥æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯åŸºäºç°æœ‰å¯¹è±¡åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹åˆ›å»ºã€‚
åœ¨åŸå‹æ¨¡å¼ä¸­ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå®ƒè¢«ç”¨ä½œåˆ›å»ºæ–°å¯¹è±¡çš„æ¨¡æ¿ã€‚æ–°å¯¹è±¡é€šè¿‡å¤åˆ¶åŸå‹å¯¹è±¡çš„å±æ€§å’ŒçŠ¶æ€æ¥åˆ›å»ºï¼Œè€Œæ— éœ€çŸ¥é“å…·ä½“çš„åˆ›å»ºç»†èŠ‚ã€‚

## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Ÿ

å¦‚æœä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹æ¯”è¾ƒå¤æ‚æ—¶ï¼Œï¼ˆæ¯”å¦‚éœ€è¦ç»è¿‡ä¸€ç³»åˆ—çš„è®¡ç®—å’Œèµ„æºæ¶ˆè€—ï¼‰ï¼Œé‚£æ¯æ¬¡åˆ›å»ºè¯¥å¯¹è±¡éƒ½éœ€è¦æ¶ˆè€—èµ„æºï¼Œè€Œé€šè¿‡åŸå‹æ¨¡å¼å°±å¯ä»¥å¤åˆ¶ç°æœ‰çš„ä¸€ä¸ªå¯¹è±¡æ¥è¿…é€Ÿåˆ›å»º/å…‹éš†ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¸å¿…å…³å¿ƒå…·ä½“çš„åˆ›å»ºç»†èŠ‚ï¼Œå¯ä»¥é™ä½å¯¹è±¡åˆ›å»ºçš„æˆæœ¬ã€‚

## åŸå‹å¯¹è±¡çš„åŸºæœ¬ç»“æ„

å®ç°åŸå‹æ¨¡å¼éœ€è¦ç»™ã€åŸå‹å¯¹è±¡ã€‘å£°æ˜ä¸€ä¸ªå…‹éš†æ–¹æ³•`clone`ï¼Œè¯¥æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå½“å‰ç±»çš„å¯¹è±¡ï¼Œå¹¶å°†åŸå§‹çš„å¯¹è±¡æˆå‘˜å˜é‡å¤åˆ¶åˆ°æ–°ç”Ÿæˆçš„å¯¹è±¡ä¸­ï¼Œè€Œä¸å¿…å®ä¾‹åŒ–ã€‚å¹¶ä¸”åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦è°ƒç”¨åŸå‹å¯¹è±¡çš„å…‹éš†æ–¹æ³•ï¼Œè€Œæ— éœ€çŸ¥é“åŸå‹å¯¹è±¡çš„å…·ä½“ç±»å‹ã€‚

åŸå‹æ¨¡å¼åŒ…å«ä¸¤ä¸ªé‡ç‚¹æ¨¡å—ï¼š

- æŠ½è±¡åŸå‹æ¥å£`prototype`:å£°æ˜ä¸€ä¸ªå…‹éš†è‡ªèº«çš„æ–¹æ³•
- å…·ä½“åŸå‹ç±»`concretePrototype`:å®ç°`clone`æ–¹æ³•ï¼Œå¤åˆ¶å½“å‰å¯¹è±¡å¹¶è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ã€‚

åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œå¯ä»¥å£°æ˜ä¸€ä¸ªå…·ä½“åŸå‹ç±»çš„å¯¹è±¡ï¼Œç„¶åè°ƒç”¨`clone`æ–¹æ³•èµ‹å€¼æºå¯¹è±¡ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚
![alt text](image.png)

---

## ä»€ä¹ˆæ—¶å€™å®ç°åŸå‹æ¨¡å¼ï¼Ÿ

ç›¸æ¯”äºç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œé€šè¿‡åŸå‹æ¨¡å¼å¤åˆ¶å¯¹è±¡å¯ä»¥å‡å°‘èµ„æºæ¶ˆè€—ã€‚å°¤å…¶åœ¨å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹å¤æ‚æˆ–å¯¹è±¡çš„åˆ›å»ºä»£ä»·è¾ƒå¤§çš„æƒ…å†µä¸‹ã€‚å½“éœ€è¦é¢‘ç¹åˆ›å»ºç›¸ä¼¼å¯¹è±¡ã€å¹¶ä¸”å¯ä»¥é€šè¿‡å…‹éš†é¿å…é‡å¤åˆå§‹åŒ–å·¥ä½œçš„åœºæ™¯æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œåœ¨å…‹éš†å¯¹è±¡çš„æ—¶å€™è¿˜å¯ä»¥åŠ¨æ€åœ°æ·»åŠ æˆ–åˆ é™¤åŸå‹å¯¹è±¡çš„å±æ€§ï¼Œåˆ›é€ å‡ºç›¸ä¼¼ä½†ä¸å®Œå…¨ç›¸åŒçš„å¯¹è±¡ï¼Œæé«˜äº†çµæ´»æ€§ã€‚

ä½†æ˜¯ä½¿ç”¨åŸå‹æ¨¡å¼ä¹Ÿéœ€è¦è€ƒè™‘åˆ°å¦‚æœå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€åŒ…å«äº†å¼•ç”¨ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆå®ç°æ·±æ‹·è´å°±ä¼šå˜å¾—è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦è€ƒè™‘å¼•ç”¨ç±»å‹å¯¹è±¡çš„å…‹éš†é—®é¢˜ã€‚å°¤å…¶åœ¨å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹å¤æ‚æˆ–å¯¹è±¡çš„åˆ›å»ºä»£ä»·è¾ƒå¤§çš„æƒ…å†µä¸‹ã€‚å½“éœ€è¦é¢‘ç¹åˆ›å»ºç›¸ä¼¼å¯¹è±¡ã€å¹¶ä¸”å¯ä»¥é€šè¿‡å…‹éš†é¿å…é‡å¤åˆå§‹åŒ–å·¥ä½œçš„åœºæ™¯æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œåœ¨å…‹éš†å¯¹è±¡çš„æ—¶å€™è¿˜å¯ä»¥åŠ¨æ€åœ°æ·»åŠ æˆ–åˆ é™¤åŸå‹å¯¹è±¡çš„å±æ€§ï¼Œåˆ›é€ å‡ºç›¸ä¼¼ä½†ä¸å®Œå…¨ç›¸åŒçš„å¯¹è±¡ï¼Œæé«˜äº†çµæ´»æ€§ã€‚

ä½†æ˜¯ä½¿ç”¨åŸå‹æ¨¡å¼ä¹Ÿéœ€è¦è€ƒè™‘åˆ°å¦‚æœå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€åŒ…å«äº†å¼•ç”¨ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆå®ç°æ·±æ‹·è´å°±ä¼šå˜å¾—è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦è€ƒè™‘å¼•ç”¨ç±»å‹å¯¹è±¡çš„å…‹éš†é—®é¢˜ã€‚

---

>## ä»£ç å®ç° ğŸš€

``` c++
#include <iostream>
#include <string>
#include <vector>
using namespace std;

// æŠ½è±¡åŸå‹ç±»
class Prototype
{
public:
    virtual Prototype *clone() const = 0;
    virtual string getDetails() const = 0;
    virtual ~Prototype(){};
};

// å…·ä½“çŸ©å½¢åŸå‹ç±»
class RtanglePrototype : public Prototype
{
private:
    string color;
    int width;
    int height;

public:
    // æ„é€ æ–¹æ³•
    RtanglePrototype(string color, int width, int height) : color(color), width(width), height(height) {}

    // å…‹éš†æ–¹æ³•
    Prototype *clone() const override
    {
        // thisæŒ‡é’ˆæŒ‡å‘å½“å‰å¯¹è±¡  *thisé€šè¿‡é—´æ¥è®¿é—®  è¡¨ç¤ºè¯¥å¯¹è±¡å¼•ç”¨ã€‚
        return new RtanglePrototype(*this);
    }

    // è·å–çŸ©å½¢çš„è¯¦ç»†ä¿¡æ¯
    string getDetails() const override
    {
        return "color:" + color + ", Width: " + std::to_string(width) + ", Height: " + std::to_string(height);
    }
};

// å®¢æˆ·ç«¯ç¨‹åº
int main()
{
    vector<Prototype *> retangles;

    // è¯»å–æ—¶éœ€è¦åˆ›å»ºçš„çŸ©å½¢æ•°é‡
    int N;
    cin>>N;
    for (auto i = 0; i < N; i++)
    {
        string color;
        int height;
        int width;
        cin >> color >> width >> height;
        // åˆ›å»ºåŸå‹å¯¹è±¡
        Prototype *originalRetangle = new RtanglePrototype(color, width, height);

        // å°†åŸå‹å¯¹è±¡ä¿å­˜åˆ°å‘é‡ä¸­
        retangles.push_back(originalRetangle);
    }

    for (const auto &rectangle : retangles)
    {
        Prototype *cloneRetangle = rectangle->clone();
        cout << cloneRetangle->getDetails() << endl;

        // é‡Šæ”¾å…‹éš†å¯¹è±¡çš„å†…å­˜
        delete cloneRetangle;
    }

    // é‡Šæ”¾åŸå‹å¯¹è±¡çš„å†…å­˜
    for (const auto &retangle : retangles)
    {
        delete retangle;
    }
    return 0;
}



```
